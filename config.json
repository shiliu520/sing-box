{
    "log": {
      "level": "error",
      "output": "sing-box.log",
      "timestamp": true
    },
    "dns": {
      "servers": [
        {
          "tag": "cloudflare",
          "address": "tls://1.1.1.1",
          "detour": "Proxy"
        },
        {
          "tag": "fakedns",
          "address": "fakeip"
        },
        {
          "tag": "local",
          "address": "https://1.12.12.12/dns-query",
          "detour": "direct"
        },
        {
          "tag": "block",
          "address": "rcode://success"
        }
      ],
      "rules": [
        // https://github.com/SagerNet/sing-box/releases/tag/v1.2.2
        {
          "outbound": "any",
          "server": "local",
          "disable_cache": true
        },
        {
          "clash_mode": "Global",
          "server": "cloudflare"
        },
        {
          "clash_mode": "Direct",
          "server": "local"
        },
        {
          "rule_set": [
  //          "block-local",
            "category-ads-all"
          ],
          "server": "block",
          "disable_cache": true
        },
        {
          "rule_set": [
  //          "direct-local",
            "apple@cn",
            "category-games@cn",
            "private",
            "cn-domain"
          ],
          "server": "local"
        },
        {
          "query_type": [
            "A",
            "AAAA"
          ],
          "server": "fakedns"
        }
      ],
      "fakeip": {
        "enabled": true,
        "inet4_range": "198.18.0.0/15",
        "inet6_range": "fc00::/18"
      },
      "independent_cache": true,
      "strategy": "prefer_ipv4"
    },
    "inbounds": [
      {
        "type": "mixed",
        "tag": "mixed-in",
        "listen": "::",
        "listen_port": 1080,
        "sniff": true
  //      "domain_strategy": "prefer_ipv4" // remove this line if you want to resolve the domain remotely (if the server is not sing-box, UDP may not work due to wrong behavior).
  //      "set_system_proxy": false
      },
  //    {
  //      "type": "tun",
  //      "tag": "tun-in",
  //      "interface_name": "tun3",
  //      "inet4_address": "172.19.0.1/30",
  //      "inet6_address": "fdfe:dcba:9876::1/126",
  //      "stack": "system",
  //      "auto_route": true,
  //      "strict_route": true,
  //      "sniff": true,
  //      "platform": {
  //        "http_proxy": {
  //          "enabled": true,
  //          "server": "127.0.0.1",
  //          "server_port": 1080
  //        }
  //      }
  //    },
      {
        "type": "tproxy",
        "tag": "tproxy-in",
        "listen": "::",
        "listen_port": 1536,
        "sniff": true
      }
    ],
  
  // 这里的 proxyproviedrs 需要使用 https://github.com/rnetx/sing-box/tree/next
    "outbound_providers": [
      {
        "tag": "glados",
        "url": "xxxxx",
        "headers": {
          "User-Agent": "sing-box,clash.meta,v2ray"
        },
        "update_interval": "12h",
        "detour": "direct",
       "actions": [
        {
          "type": "setdialer",
          //
          "rules": ["type:direct"],
          "logical": "and", // 默认为 and
          //
          "invert": false, // 默认为 false ，匹配到的 Outbound 才会被执行操作；若为 true ，没有匹配到的 Outbound 才会被执行操作
          // 新配置
          // 删除原配置 $tag 项
          // "delete_dialer": [
          //   "direct"
          // ],
          "set_dialer": {
            "direct": "glados_direct"
          }
        }
       ]
      }
    ],
    "outbounds": [
      {
        "type": "direct",
        "tag": "direct"
      },
      {
        "type": "block",
        "tag": "block"
      },
      {
        "type": "dns",
        "tag": "dns-out"
      },
      {
        "type": "selector",
        "tag": "Proxy",
        "outbounds": [
          "glados",
          "direct"
        ]
      }
    ],
    "route": {
      "rule_set": [
  //      {
  //        "type": "local",
  //        "tag": "block-local",
  //        "format": "source",
  //        "path": "./block.json"
  //      },
  //      {
  //        "type": "local",
  //        "tag": "direct-local",
  //        "format": "source",
  //        "path": "./direct.json"
  //      },
        {
          "type": "remote",
          "tag": "category-ads-all",
          "format": "binary",
          "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-category-ads-all.srs",
          "download_detour": "Proxy",
          "update_interval": "24h"
        },
        {
          "type": "remote",
          "tag": "apple@cn",
          "format": "binary",
          "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-apple@cn.srs",
          "download_detour": "Proxy",
          "update_interval": "24h"
        },
        {
          "type": "remote",
          "tag": "category-games@cn",
          "format": "binary",
          "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-category-games@cn.srs",
          "download_detour": "Proxy",
          "update_interval": "24h"
        },
        {
          "type": "remote",
          "tag": "private",
          "format": "binary",
          "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-private.srs",
          "download_detour": "Proxy",
          "update_interval": "24h"
        },
        {
          "type": "remote",
          "tag": "cn-domain",
          "format": "binary",
          "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-cn.srs",
          "download_detour": "Proxy",
          "update_interval": "24h"
        },
        {
          "type": "remote",
          "tag": "cn-ip",
          "format": "binary",
          "url": "https://raw.githubusercontent.com/SagerNet/sing-geoip/rule-set/geoip-cn.srs",
          "download_detour": "Proxy",
          "update_interval": "24h"
        },
        {
          "type": "remote",
          "tag": "google-cn",
          "format": "binary",
          "url": "https://cdn.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/google-cn.srs",
          "download_detour": "direct",
          "update_interval": "24h"
        }
      ],
      "rules": [
        {
          "domain_suffix": [
            ".xn--ngstr-lra8j.com",
            ".googleapis.cn",
            ".gstatic.com"
          ],
          "rule_set_ipcidr_match_source": false,
          "invert": false,
          "outbound": "Proxy"
        },
        {
          "domain_keyword": [
            "uisee",
            "frp-fan"
          ],
          "rule_set_ipcidr_match_source": false,
          "invert": false,
          "outbound": "direct"
        },
        {
          "type": "logical",
          "mode": "or",
          "rules":[
            {
              "port":53
            },
            {
              "protocol": "dns"
            }
          ],
          "outbound": "dns-out"
        },
        {
          "clash_mode": "Global",
          "outbound": "Proxy"
        },
        {
          "clash_mode": "Direct",
          "outbound": "direct"
        },
        {
          "rule_set": [
  //          "block-local",
            "category-ads-all"
          ],
          "outbound": "block"
        },
        {
          "rule_set": [
  //          "direct-local",
            "apple@cn",
            "category-games@cn",
            "private",
            "cn-domain"
          ],
          "outbound": "direct"
        },
        {
          "rule_set": "cn-ip",
          "outbound": "direct"
        },
        {
          "ip_is_private": true,
          "outbound": "direct"
        },
        {
          "rule_set": "google-cn",
          "outbound": "Proxy"
        }
      ],
  //    "auto_detect_interface": true,
  //    Tun 一般需要开启
  //    "default_mark": 233,
  //    Tproxy 可能用到
      "find_process": true,
      "final": "Proxy"
    },
    "experimental": {
      "cache_file": {
        "enabled": true,
        "store_fakeip": true
      },
      "clash_api": {
        "external_controller": "0.0.0.0:9090",
        "secret": "singbox",
        "external_ui": "Yacd-meta-gh-pages"
      }
    }
  }